if(typeof WW=="undefined")WW={};window.supported=false;(function(){var e=new Worker(window.URL.createObjectURL(new Blob(["onmessage=function(e){};"],{type:"text/javascript"})));var t=new ArrayBuffer(1);e.postMessage(t,[t]);if(t.byteLength){console.log("Transferables are not supported in your browser!")}else{supported=true}})();WW.Worker=function(e,t,n){var r=new Worker(e);var i=r;r.defaultListener=t||function(){};r.listeners={};r.onmessage=function(e){if(e.data instanceof Object&&e.data.hasOwnProperty("method")){r.listeners[e.data.method].apply(i,e.data)}else{r.defaultListener.call(i,e.data)}};r.onerror=n||function(e){throw new Error(event.message+" ("+event.filename+":"+event.lineno+")")};r.Query=function(){if(arguments.length<1){throw new TypeError("Worker.Query - not enough arguments");return}var e=Array.prototype.slice.call(arguments,1);if(supported&&USE_TRANSFERABLE){var t=[];for(var n=0;n<e.length;n++){var i=e[n];if(i instanceof Object){if(i.buffer){t.push(i.buffer)}else if(i instanceof ArrayBuffer){t.push(i)}}}e["method"]=arguments[0];r.postMessage(e,t);if(debug){for(var n in t){if(t[n].byteLength){console.log("Buffer is Defined After postMessage : Using Copy Mode")}else{console.log("Buffer is Undefined After postMessage : Using Transferables")}}}}else{e["method"]=arguments[0];r.postMessage(e)}};r.terminate=function(){Worker.prototype.terminate.call(r)};r.addListener=function(e,t){r.listeners[e]=t};r.removeListener=function(e){delete r.listeners[e]};r.addNativeArray=function(e){if(e.buffer){r.trans_data.push(e.buffer)}else if(e instanceof ArrayBuffer){r.trans_data.push(e)}else{throw"addNativeArray : Error Not A NativeArray"}};return r};WW.WorkerTask=function(){function r(){if(arguments.length<1){throw new TypeError("reply - not enough arguments");return}var e=Array.prototype.slice.call(arguments,1);if(supported&&USE_TRANSFERABLE){var t=[];for(var n=0;n<e.length;n++){var r=e[n];if(r instanceof Object){if(r.buffer){t.push(r.buffer)}else if(r instanceof ArrayBuffer){t.push(r)}}}e["method"]=arguments[0];self.postMessage(e,t)}else{e["method"]=arguments[0];self.postMessage(e)}}function i(e){if(e.buffer||e instanceof ArrayBuffer||e instanceof ArrayBufferView){if(e instanceof ArrayBuffer){trans_data.push(e)}else{trans_data.push(e.buffer)}}}function o(e){throw JSON.stringify(e)}function u(e){throw JSON.stringify(e)}var e=this;var t={};var n=[];onmessage=function(e){if(e.data instanceof Object&&e.data.hasOwnProperty("method")){var n=e.data;t[e.data.method].apply(self,n)}else{u(e.data)}};var s=0;this.addListener=function(e,n){t[e]=n;s++};this.removeListener=function(e){delete t[e];s--};this.addExternalScript=function(e){n.push(e)};this.toBlob=function(){if(!s)throw new Error("No Listener found");var e=r.toString()+";";e+=o.toString()+";";e+=u.toString()+";";e+=i.toString()+";";e+="var supported ="+supported+";";e+="var trans_data = [];";e+="var USE_TRANSFERABLE ="+USE_TRANSFERABLE+";";e+="queryable_functions = {";var a=0;for(var f in t){e+=f+" : "+t[f];e+=++a!=s?",":""}e+="};";if(n.length){for(var f in n){e+="importScripts('"+document.location.href.replace(/\/[^/]*$/,"/")+n[f]+"');"}}else{e+="var external_scripts = [];"}e+="self.onmessage="+onmessage.toString()+";";var l=new Blob([e],{type:"text/javascript"});return window.URL.createObjectURL(l)}}
